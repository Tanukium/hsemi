## Bootstrapを使う

***

マルチプラットフォーム（モバイルデバイスとか）の汎用性も欠かせないと考えるため、  
サイトの見た目をモバイル向けにするフレームワークのBootstrapを導入した。  
さらに上級の機能がありそうだが、現在の段階ではまだ使う必要はないのでしばらく置いとく。

軽量化を求めたいので、今度は私がnpmじゃなくCDN方式でBootstrapを導入した。  
`./view`にあるすべての`.ejs`ファイルの中の、stylesheetを引用する内容を削除してから、下記の内容：

> ```
> <meta name="viewport" content="width=device-width, initial-scale=1">  
> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">  
> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>  
> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>  
> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
> ```

と記入したらサイトの様子は一気に  
![180618-1.jpg][1]  
から  
![180618-2.jpg][2]  
に変わってきた。  
モバイルデバイス（iPhone7, iOS11.3.1）でも  
![180618-3.jpg][3]  
のように、うまく自動的にズームした。  
ただし、CDN方式なので、オンラインが必要である。オフライン状態でローカルアドレス（127.0.0.1）にアクセスするとstylesheetとフォントを全部読み取れなくなるという欠点もあるらしい。

## ページの上に10*10の数字の行列を描く

***

サイトの建設は一段落したんだが、どこから表計算アプリの開発を着手し始めるについては困っていた。  
いろんなキーワードを使ってググったら、

1. データベースの内容を表としてサイトに乗せる
2. データに基づき表ではなく図形のグラフをサイトに乗せる

のような内容しか出てこなかった。  
もともと私はマウスや入力欄を使って、何行かける何列の表を作れるアプリを開発したいが、上記のサーチ結果はその目的と全く違ったものだった。

そしてさらにサーチすると、かなり完成度の高い表計算Webアプリ（[EtherCalc][]）が出てきたが、完成度はさすがに高すぎてソースコードを全く読み取れなく理解できない。  
途方に暮れて悩んでいる中、先生から「Bootstrapを置いといて、まず10かける10の数字の行列をサイトに出力したら（乗せたら）どうか」とアドバイスしてくれて、私を煩悩から救い出した。

だが、RubyやPythonはともかく、JSでどうやって内容をconsoleではなくサイトに出力することまでわからなくて、やむを得なくもう一回「JSで10*10の数字行列を描く」という内容をググった。  
そこで、

> ```
> <script type="text/javascript">
>     window.onload = function() {
>         var table = document.getElementById("demo");
>         for( var i = 0; i < 10; i++ ){
>             var row = document.createElement("tr");
>             for( var j = 0; j < 10; j++ ){
>                 var col = document.createElement("td");
>                 col.innerHTML = (i*10)+j + 1; // assigning value to the cell
>                 row.appendChild(col);
>             }
>             table.appendChild(row);
>         }
>     };
> </script>
> ```

というサンプルコードを見つけた。実際に実験場に載せると、  
![180618-4.jpg][4]  
という結果が出て、無事に作動してるらしい。  
……とはいうものの、そのコードもよく理解できていない。どうやら自分の一番大きな問題はJSを使える力の不足みたいだ。  
前はちょっとW3CSchoolの教程を見ながら開発を進めたいと思ったが、今はもうそんな浅い考えをあきらめた。  
ES2015（ES6）基準に基づき改定された『JavaScript本格入門』という本があって、今週の金曜日に手元に到着する予定だ。  
それを読むとdocumentクラスは何か、その中のメソッド（getElementByIdとかinnerHTMLとかappendChildとか）の使い方などを理解できるようになるだろうと、わたしはそう祈っている。  
（tr、tdなどのタグはHTMLでテーブル（表）を作る文法で、[W3CSchoolの教程][]を見るだけで十分な気がする）

## 次の目標

***

もし上のコードをうまく理解できるようになったら、私は今度数字を隠して枠線を出して、10*10の表を描きたいと思う。  
そしてそれができたら、さらに任意の行数かける任意の列数の表も作りたい。  
すべてうまくいけば、そのやり方を関数化（メソッド化）して次のステップ（作る表のスペースを定義する変数を、postする入力欄の添付）の基礎にしたいと考える。

## 余談

***

### ThunderBirdで学校のメールサービスを利用したらサーバを設定できない

実は当初学校のメールサービスがこっそりとPOP3からIMAPに移行した時には、私がもうThunderBirdを使って

> ```
> imap.nagano.ac.jp
> smtp.nagano.ac.jp
> ```

（確かにそうだったけ？）というアドレスでIMAPプロトコルのキャンパスメールサービスを利用し始めた。  
学校全体のサービスがGSuiteに移行したら私も自然にThunderBirdのサーバ設置をGmailバージョンに切り替えようとした。  
しかしあの時何度試してもうまくいけず、しょうがなくしばらくあきらめたんだ。  
今回のゼミで先生の「キャンパスメールサービスのサーバはもうGmailに切り替えたぞ」とのお知らせを聞いて、私はすぐ中断したサーバ設置の切り替え作業を復旧し始めた。  
……しかし、前回とほぼ変わらず、またエラーが出てきちゃった。  
「いやー」と思いながら、そのエラーをとりあえずこちらでまとめてみる。

Gmailの提供した教程に従って、私は下記の設置をThunderBirdの中でした。  
![180618-5.jpg][5]  
このときデファルトのパスワードを使ったんだが、どうやら問題があるらしい。  
下の「詳細設定」ボタンを押すと、今度インターフェイスの右下に  
![180618-6.jpg][6]  
というポップアップが出ちゃって、一つのサイトアドレスを手に入れた。  
そのサイトにアクセスすると、Googleが今の問題の解決策をいくつか提供してくれた。  
![180618-8.jpg][8]  
ThunderBirdは最新バージョンだし、わたしは最近パスワードを変えたことはないし、問題はどうみてもアプリパスワードの使用か、安全性の低いアプリのアクセスを許可するかで解決できそうな気がする。  

二段階パスワード認証を設置して、アプリごとに変わるランダムな「アプリパスワード」を生成した。  
しかし、そのパスワードを使っても、また  
![180618-7.jpg][7]と![180618-6.jpg][6]  
のエラーが出ちゃった。なんだかこの方向ではないらしい。

では、安全性の低いアプリのアクセスを許可したらどうかな。  
解決策のページの「安全性の低い…」というリンクをクリックすると、さらに  
![180618-9.jpg][9]  
が出てきた。そこの「安全性の低いアプリ」というリンクをクリックすると、なんと……  
![180618-10.jpg][10]  
……というページが出ちゃった。  
もう私の手で解決できない問題になったらしいので、とにかくこちらで報告させていただく。

### キャンパスで本サイトにアクセスできない

より便利に自分の開発成果を先生やこのプロジェクトに興味を持つ方にシェアするために、私は現在メンテナンスしているクラウドサーバを使ってリモートのサイト立てた。  
サイトのアドレスは[https://e2c.ninja/sts][]だが、なんだかキャンパスネットでうまくそこにアクセスできないらしい。  
毎回必ず「ERR_CONNECTION_TIMED_OUT」というエラーが出るんだが、外部のネットを使ったら全然問題なしアクセスできる。  
問題はいったい何かな……それも私の力で解決できないことなので、こちらにまとめて報告させていただく。

### クラウドについての雑談

さきも書いたんだが、今自分でメンテナンスしている姉のクラウドサーバ（のごく一部のスペース）を拝借している。  
姉はあまりパソコンに詳しくなく、ただ通販サイトを載せるサーバがほしいのでサーバの初期設定や`httpd.conf`の配置は全部私がしてあげた。  
だいぶ昔（中学の時）Fedora 11ぐらい使ったことがあるが、この間あまりRedhat系を触れることはない上Debian系の安定性を考えてUbuntu ServerというLinuxのリリースを選んだ。  
ssh-keygenでSSH用のキーペアを作って、puttyのSSH Key Agentを使って秘密鍵を.ppkの拡張子のファイルに転換して、  
`id_rsa.pub`という公開鍵ファイルの中の内容をすべてリモートサーバの`~/.ssh/authorized_keys`というファイルに書き込めばSSHとSFTPプロトコルで、Putty+Filezillaでリモート側のターミナルを開いたり、リモート側にファイルをアップロード（あるいはそこからファイルをダウンロードしたり）できるようになる。  
それから、apache2やphp・php_modをインストールして、virtual siteというapache2の特性を利用して`/var/www`の下にドメインフォルダを作り出して、ネットのテンプレートを参照してドメイン独自のhttpd配置ファイルを書いた。  
そしてプロジェクトを載せるために、git、node.js、npmとpm2などのツールもインストールした。  
現在サーバでのプロジェクトの運行状況はこうである。  
![180618-11.jpg][11]

***


[EtherCalc]: https://ethercalc.net/ "EtherCalc"
[W3CSchoolの教程]: http://www.w3school.com.cn/html/html_tables.asp "HTML 表格"
[https://e2c.ninja/sts]: https://e2c.ninja/sts "サイト"

[1]: /public/images/180618-1.jpg "180618-1"
[2]: /public/images/180618-2.jpg "180618-2"
[3]: /public/images/180618-3.jpg "180618-3"
[4]: /public/images/180618-4.jpg "180618-4"
[5]: /public/images/180618-5.jpg "180618-5"
[6]: /public/images/180618-6.jpg "180618-6"
[7]: /public/images/180618-7.jpg "180618-7"
[8]: /public/images/180618-8.jpg "180618-8"
[9]: /public/images/180618-9.jpg "180618-9"
[10]: /public/images/180618-10.jpg "180618-10"
[11]: /public/images/180618-11.jpg "180618-11"
