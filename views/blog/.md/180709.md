# 180709：POSTメソッドで任意の大きさのテーブルを作る

## 復習：Expressの中でPOSTメソッドを使う

Expressは、`app.get`、`router.get`と`app.post`メソッドでGET・POSTのリクエストを処理して、  
`res.render`と`res.send`メソッドで要求されたリソースをレスポンスしてあげる。

6月25日のゼミで、私は`routes/`フォルダのルータファイルの中で`router.post`メソッドを使ってPOSTメソッドをテストしてみたが、  
うまく作動できなかった。なんだかPOSTメソッドだけは特別に扱われた気がする。  
とりあえず、あの時`app.js`のなかで`app.post`をコールするとともにテスト用のフォームページを作ったことで、POSTメソッドをテストしてみた。

***

先週のviewエンジンの切り替えによって`views/sand/`の中のテスト用ページ`form.ejs`は`form.pug`になって、ページの内容も下のように書き直された。

```
extends ../layout

block content
  form(action="#", method="post")
    input(type="text", name="row")
    input(type="text", name="col")
    input(type="submit")
```

こうして、簡単なPOSTメソッドを使うフォーム（のページ）を作った。  
そして`app.js`を開き、ルータファイルを定義する文（`app.use('/sand', sandRouter);`）の下に次の三行の文を書き込む：

```
app.post('/sand/form', function(req, res) {
    console.log(req.body);
    res.send(`行数は${req.body.row}、列数は${req.body.col}`);
```

セーブしてExpress本体を再起動することで、`本サイト/sand/form`へPOSTメソッドの付着を完了した。

テストして、次のような画面が出てきた。

![180709-1.jpg][1]

試しに一番目のコラムに10、二番目のコラムに20を入力して送信を押したら、

![180709-2.jpg][2]

が出てくると同時にコンソールが

![180709-3.jpg][3]

をスクリーンにプリントアウトした。うまく動いているね。  
肝心な「`res.body`は何」という問題も6月25日の日誌で簡単に説明されたので、ここでは割愛。

## POSTとmakeTable関数を結合して任意の大きさの表を作る



***

[前のページに戻る][]


[前のページに戻る]: /blog "ブログ"
[1]: /images/180709-1.jpg "1"
[2]: /images/180709-2.jpg "2"
[3]: /images/180709-3.jpg "3"
